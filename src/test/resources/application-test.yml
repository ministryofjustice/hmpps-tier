spring:
  config:
    use-legacy-processing: true
  profiles:
    include: stdout
  security:
    oauth2:
      resourceserver:
        jwt:
          public-key-location: classpath:local-public-key.pub

  flyway:
    locations: classpath:db/migration/development,classpath:db/migration/all

logging:
  level:
    uk.gov: DEBUG

server:
  shutdown: immediate

management.endpoint:
  health.cache.time-to-live: 0
  info.cache.time-to-live: 0

community:
  endpoint:
    url: http://localhost:8091/secure

assessment:
  endpoint:
    url: http://localhost:8092

hmpps.tier:
  endpoint:
    url: http://localhost:8080

tier-to-delius:
  endpoint:
    url: http://localhost:8093

hmpps.sqs:
  provider: localstack
  queues:
    hmppsoffenderqueue:
      queueName: hmpps_offender_event_queue
      dlqName: hmpps_offender_event_dlq
      subscribeTopicId: hmppsoffendertopic
      subscribeFilter: '{"eventType":[ "OFFENDER_MANAGEMENT_TIER_CALCULATION_REQUIRED"] }'
      dlqMaxReceiveCount: 1
    hmppscalculationcompletequeue:
      queueName: hmpps_calculation_complete_event_queue
      dlqName: hmpps_calculation_complete_event_dlq
      subscribeTopicId: hmppscalculationcompletetopic
      subscribeFilter: '{"eventType":[ "tier.calculation.complete"] }'
      asyncQueueClient: true
      dlqMaxReceiveCount: 1
    hmppsdomaineventsqueue:
      queueName: hmpps_domain_events_queue
      dlqName: hmpps_domain_events_dlq
      subscribeTopicId: hmppsdomaineventstopic
      subscribeFilter: '{"eventType":[ "breach.end"] }'
      dlqMaxReceiveCount: 1
  topics:
    hmppscalculationcompletetopic:
      arn: arn:aws:sns:eu-west-2:000000000000:${random.uuid}
    hmppsoffendertopic:
      arn: arn:aws:sns:eu-west-2:000000000000:${random.uuid}
    hmppsdomaineventstopic:
      arn: arn:aws:sns:eu-west-2:000000000000:${random.uuid}

oauth:
  endpoint:
    url: http://localhost:9090/auth
  client:
    id: client-id
    secret: client-secret
